<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">
<link href="assets/images/favicon.png" rel="icon" />
<title>Documentation | Linux Project</title>
<meta name="description" content="Your ThemeForest item Name and description">
<meta name="author" content="harnishdesign.net">

<!-- Stylesheet
============================== -->
<!-- Bootstrap -->
<link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap/css/bootstrap.min.css" />
<!-- Font Awesome Icon -->
<link rel="stylesheet" type="text/css" href="assets/vendor/font-awesome/css/all.min.css" />
<!-- Magnific Popup -->
<link rel="stylesheet" type="text/css" href="assets/vendor/magnific-popup/magnific-popup.min.css" />
<!-- Highlight Syntax -->
<link rel="stylesheet" type="text/css" href="assets/vendor/highlight.js/styles/github.css" />
<!-- Custom Stylesheet -->
<link rel="stylesheet" type="text/css" href="assets/css/stylesheet.css" />
</head>

<body data-spy="scroll" data-target=".idocs-navigation" data-offset="125">

<!-- Preloader -->
<div class="preloader">
  <div class="lds-ellipsis">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
<!-- Preloader End --> 

<!-- Document Wrapper   
=============================== -->
<div id="main-wrapper"> 
  
  <!-- Header
  ============================ -->
  <header id="header" class="sticky-top"> 
    <!-- Navbar -->
    <nav class="primary-menu navbar navbar-expand-lg navbar-dropdown-dark bg-dark navbar-text-light">
      <div class="container-fluid">
        <!-- Sidebar Toggler -->
		<button id="sidebarCollapse" class="navbar-toggler d-block d-md-none" type="button"><span></span><span class="w-75"></span><span class="w-50"></span></button>
		
		<!-- Logo --> 
        <a class="logo ml-md-3" href="../index.html" title="Project Green"> <img src="assets/images/logo.png" alt="iDocs Template"/> </a> 
		<span class="text-2 ml-2">v.∞</span> 
        <!-- Logo End -->
        
		<!-- Navbar Toggler -->
		<button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#header-nav"><span></span><span></span><span></span></button>
        
		<div id="header-nav" class="collapse navbar-collapse justify-content-end">
          <ul class="navbar-nav">
            <li class="dropdown"> <a class="dropdown-toggle" href="#">Dropdown</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#">Dropdown Action</a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="../index.html">Action</a></li>
                    <li><a class="dropdown-item" href="feature-header-dark.html">Another Action</a></li>
                    <li><a class="dropdown-item" href="feature-header-primary.html">Something Else Here</a></li>
                    <li><a class="dropdown-item" href="index-2.html">Another Link</a></li>
                  </ul>
                </li>
                <li><a class="dropdown-item" href="#">Another Action</a>
                <li><a class="dropdown-item" href="#">Something Else Here</a></li>
              </ul>
            </li>
            <li><a target="_blank" href="https://discord.gg/6ucmqa6K39">Support</a></li>
          </ul>
        </div>
        <ul class="social-icons social-icons-light social-icons-sm ml-lg-2 mr-2">
          <li class="social-icons-discord"><a data-toggle="tooltip" href="https://discord.gg/6ucmqa6K39" target="_blank" title="" data-original-title="Discord"><i class="fab fa-discord"></i></a></li>
          <li class="social-icons-github"><a data-toggle="tooltip" href="https://github.com/Vosmyerka/linux-final-2023" target="_blank" title="" data-original-title="GitHub"><i class="fab fa-github"></i></a></li>
        </ul>
      </div>
    </nav>
    <!-- Navbar End --> 
  </header>
  <!-- Header End --> 
  
  <!-- Content
  ============================ -->
  <div id="content" role="main">
    
	<!-- Sidebar Navigation
	============================ -->
	<div class="idocs-navigation bg-dark docs-navigation-dark">
      <ul class="nav flex-column ">
        <li class="nav-item"><a class="nav-link active" href="#idocs_start">Getting Started</a>
          <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="#idocs_installation">Installation</a></li>
            <li class="nav-item"><a class="nav-link" href="#idocs_html_structures">Instances</a></li>
            <li class="nav-item"><a class="nav-link" href="#idocs_html_structure">Security Groups</a></li>
            <li class="nav-item"><a class="nav-link" href="#idocs_sass">Load Balancers</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="#idocs_layout">Software Installation</a>
          <ul class="nav flex-column">
			<li class="nav-item"><a class="nav-link" href="#idocs_header">LAMP Stack</a></li>
			<li class="nav-item"><a class="nav-link" href="#idocs_navbar">Postfix</a></li>
			<li class="nav-item"><a class="nav-link" href="#idocs_sidebar">Rsync & Inotify</a></li>
      <li class="nav-item"><a class="nav-link" href="#idocs_users">Users & Groups</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="#idocs_content">Installing Scripts and Website</a>
			<ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="#idocs_typography">Monitoring</a></li>
            <li class="nav-item"><a class="nav-link" href="#idocs_code">Rsync</a></li>
            <li class="nav-item"><a class="nav-link" href="#idocs_backups">Backups</a></li>
            <li class="nav-item"><a class="nav-link" href="#idocs_components">Website</a></li>
          </ul>
		</li>
        <li class="nav-item"><a class="nav-link" href="#idocs_source_credits">Source & Credits</a></li>
        <li class="nav-item"><a class="nav-link" href="#idocs_support">Support</a></li>
		</li>
      </ul>
    </div>
    
    <!-- Docs Content
	============================ -->
    <div class="idocs-content">
      <div class="container"> 
        
        <!-- Getting Started
		============================ -->
        <section id="idocs_start">
        <h1>Documentation</h1>
        <h2>Building a Secure and Scalable Web Application on a Linux Server</h2>
        <p class="lead">Thank you so much for visiting this page.</p>
		<hr>
		<div class="row">
			<div class="col-sm-6 col-lg-4">
				<ul class="list-unstyled">
					<li><strong>Version:</strong> ∞</li>
					<li><strong>Author:</strong> <a href="https://github.com/Vosmyerka" target="_blank">Nikita Polevtsov</a></li>
				</ul>
			</div>
			<div class="col-sm-6 col-lg-4">
				<ul class="list-unstyled">
					<li><strong class="font-weight-700">Created:</strong> 6 May, 2023</li>
					<li><strong>Update:</strong> 6 May, 2023</li>
				</ul>
			</div>
		</div>
        <p class="alert alert-info">If you have any questions that are beyond the scope of this help file, Please feel free to email via <a target="_blank" href="../contact.html">Contact Page</a>.</p>
        </section>
        
		<hr class="divider">
		
        <!-- Installation
		============================ -->
        <section id="idocs_installation">
          <h2>AWS VMs Installation</h2>
          <p class="lead">Follow the steps below to setup your AWS Web Server:</p>
          <li>This part of the guide shows the installation of <strong>Virtual Machines</strong> and <strong>Load Balancers</strong> in Amazon AWS.</li>
        </section>
        
		<hr class="divider">
		
        <section id="idocs_html_structures">
          <h2>Instances</h2>
          <p>Instances are the virtual machines on which all programmes and scripts will subsequently be installed.</p>
            <ol>
              <li>Firstly, it is needed to go into your <a href = "https://console.aws.amazon.com/">AWS Management Console</a> and enter the <strong>EC2</strong> section. In this example, the <strong>free trial</strong> period is used.<br><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109484239604432936/image.png?width=1366&height=682" class="img-fluid" alt="Responsive image">
              <li>Next, click on the <strong>"Launch instance"</strong> button to create the virtual machine.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109484430206193684/image.png?width=1369&height=682" class="img-fluid" alt="Responsive image">
              <li>Then specify the parameters for creating the virtual machine, such as machine name, operating system, machine type and so on. You then need to specify the parameters for creating the virtual machine, such as machine name, operating system, machine type, and so on. To start with, let's specify a name.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109485726296449135/image.png?width=697&height=144" class="img-fluid" alt="Responsive image">
              <li>Then comes the choice of operating system and kernel architecture. In our case the SSD from the <strong>free trial</strong> and the <strong>64-bit (x86)</strong> kernel are used.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109485823075815494/image.png?width=699&height=627" class="img-fluid" alt="Responsive image">
              <li>Next, selecting the type of the instance. Still using the free trial version.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109485916789161985/image.png?width=701&height=221" class="img-fluid" alt="Responsive image">
              <li>Next you need to create <strong>key pair</strong> to connect to the machine via SSH. Otherwise we won't be able to connect to it via a third-party SSH client, nor will we be able to set up automatic machine synchronisation. <br>To do this, enter the key name, select <strong>RSA</strong> type, select the <strong>.pem</strong> format, create the key and download it.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109485964625195148/image.png?width=696&height=177" class="img-fluid" alt="Responsive image"><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109486086704611358/image.png?width=537&height=613" class="img-fluid" alt="Responsive image">
              <li>In the network configuration, a security group must be created and all traffic must be allowed to access this web page.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109486266912886804/image.png?width=696&height=629" class="img-fluid" alt="Responsive image">
              <li>In the storage configuration select the minimum parameters offered by AWS, as there are many limits in the free version.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109486410068672645/image.png?width=694&height=322" class="img-fluid" alt="Responsive image">
              <li>At the end, specify that we need 2 instances and create them.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109486557381009438/image.png?width=323&height=682" class="img-fluid" alt="Responsive image">
            </ol>
      <hr class="divider">
        <!-- HTML Structure
		============================ -->
        <section id="idocs_html_structure">
          <h2>Security Groups</h2>
            <ol>
              <li>Before load balancers can be created, target groups must be created to define the machines. To do this, go to the relevant section and click on <strong>"Create target group"</strong>.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109486875799986176/image.png?width=1383&height=682" class="img-fluid" alt="Responsive image">
              <li>In the first point select what the target groups will use to identify the machines, be it ip address or vpc. In our case the <strong>"Instances"</strong> type is used.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109487109225598996/image.png?width=721&height=569" class="img-fluid" alt="Responsive image">
              <li>Next, specify the name of the target group and the VPC of instances you wish to link.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109487365061361674/image.png?width=719&height=485" class="img-fluid" alt="Responsive image">
              <li>At the end you will need to bind the Instances and you will see them in this window.</li><br>
              <img src="https://media.discordapp.net/attachments/1109484213033517107/1109487794184782045/image.png?width=1439&height=672" class="img-fluid" alt="Responsive image">
            </ol>
		<hr class="divider">
		        
		<!-- Sass
		============================ -->
        <section id="idocs_sass">
          <h2>Load Balancers</h2>
          <p>Load Balancer (LB) is a critical component of any distributed system. It helps spread the traffic across a cluster of servers to improve the responsiveness and availability of applications, websites, or databases.
            Typically a load balancer sits between the client and the server accepting incoming network and application traffic and distributing the traffic across multiple backend servers using various algorithms. By balancing application requests across multiple servers, a load balancer reduces individual server load and prevents any one application server from becoming a single point of failure, thus improving overall application availability and responsiveness.</p>
          <ol>
            <li>To create load balancers, you need to go to the appropriate category next to Security Groups and click on <strong>"Create load balancer"</strong>.</li><br>
            <img src="https://media.discordapp.net/attachments/1109484213033517107/1109488038888886322/image.png?width=1377&height=682" class="img-fluid" alt="Responsive image">
            <li>Choose <strong>Application Load Balancer</strong></li><br>
            <img src="https://media.discordapp.net/attachments/1109484213033517107/1109488281428693042/image.png?width=824&height=682" class="img-fluid" alt="Responsive image">
            <li>Specify the name of the load balancer, its scheme and type of ip address</li><br>
            <img src="https://media.discordapp.net/attachments/1109484213033517107/1109488485494161449/image.png?width=971&height=440" class="img-fluid" alt="Responsive image">
            <li>Next, fill in the Network mapping. Specify VPC and Mappings. To be on the safe side, select <strong>all Availability Zones</strong> at once, as if you don't select the zone in which you have instances, then you will need to specify it again.</li><br>
            <img src="https://media.discordapp.net/attachments/1109484213033517107/1109488677186437180/image.png?width=969&height=550" class="img-fluid" alt="Responsive image">
            <li>Next, select the same Security Group in which you have instances.</li><br>
            <img src="https://media.discordapp.net/attachments/1109484213033517107/1109488768114757682/image.png?width=971&height=225" class="img-fluid" alt="Responsive image">
            <li>In the last step, you can leave the default settings and save load balancer.</li><br>
            <img src="https://media.discordapp.net/attachments/1109484213033517107/1109488864994791554/image.png?width=968&height=465" class="img-fluid" alt="Responsive image">
          </ol>
        </section>
        
		<hr class="divider">
		
		<!-- Layout
		============================ -->
        <section id="idocs_layout">
          <h2>Software Installation</h2>
          <p class="lead mb-5">Documentation of installation all the software which was used in the project.</p>
        </section>
		
		
        <!-- Header
		============================ -->
        <section id="idocs_header">
          <h2>LAMP Stack</h2>
          <p>To install the LAMP Stack, I used <a href="https://usefulangle.com/post/324/aws-ec2-install-linux-apache-mysql-php-phpmyadmin-lamp-stack-ubuntu-20-04">this guide</a> which describes in detail everything that needs to be done</p>
          <h3>Commands to install LAMP Stack</h4>
          <h4>Updating the Package List</h3>
            <p>Update the package list on the instance so that we can have the latest available versions of Apache, PHP, MySql and phpMyAdmin.</p>
          <p><code>sudo apt-get update</code></p>
          <h4>Installing Apache</h4>
            <p><li>Install Apache through the following command :</li></p>
          <p><code>sudo apt-get install apache2</code></p>
            <p>Note that it will install the latest available version of Apache.</p>
            <p><li>A successful installation of Apache can be checked by typing in the Public IP address / DNS of the instance in the browser. This can be found from the AWS EC2 management page.<br><br>
              Successfully installed Apache will look like :</li></p>
              <img src="https://usefulangle.com/img/posts/324/10.png" class="img-fluid" alt="Responsive image">
          <h4>Installing MySQL</h4>
              <p><li>Install MySQL using the following command :</li></p>
          <p><code>sudo apt-get install mysql-server</code></p>
          <p><li>After installation is complete, the mysql database is strengthened using the following command:</li></p>
          <p><code>sudo mysql_secure_installation</code></p>
          <p><li>In the next screen we will be asked whether we need to setup VALIDATE PASSWORD plugin. We selected <strong>no</strong>.</li></p>
          <p><li><strong>Set the password for the root MySql account.</strong></li></p>
          <p><li>Remove anonymous users? We selected <strong>yes</strong>.</li></p>
          <p><li>Disallow root login remotely? We selected <strong>no</strong>.</li></p>
          <p><li>Remove test database and access to it? We chose <strong>yes</strong>.</li></p>
          <p><li>Reload privilege tables now? We again chose <strong>yes</strong>.</li></p>
          <p><li>Following installation we can login into MySQL by executing the following command:</li></p>
          <p><code>sudo mysql -u root -p</code></p>
          <p>Entering the password in the prompt, we can login into MySQL and will be greeted by the mysql prompt. Type exit to get out of MySQL.</p>
          <h4>Installing PHP with Common Extensions</h4>
          <p><li>Install PHP and commonly used extensions through the following command.</li></p>
          <p><code>sudo apt-get install php libapache2-mod-php php-mysql php-curl php-gd php-json php-zip</code></p>
          <p>The latest available version of PHP (7.4.3 as of May, 2020) will be installed.</p>
          <p><li>After PHP has been installed, restart Apache using the following command:</li></p>
          <p><code>sudo service apache2 restart</code></p>
          <h4>Installing phpMyAdmin</h4>
          <p><li>Install phpMyAdmin through the command :</li></p>
          <p><code>sudo apt-get install phpmyadmin</code></p>
          <img src="https://usefulangle.com/img/posts/324/14.png" class="img-fluid" alt="Responsive image">
          <p><li>In the next screen select the <strong>apache2</strong> webserver.</li></p>
          <img src="https://usefulangle.com/img/posts/324/15.png" class="img-fluid" alt="Responsive image">
          <p>It is important to note here, <strong>space-bar is pressed to select the option, tab is pressed to move to Ok button</strong>. Correctly selected apache2 will look like :</p>
          <img src="https://usefulangle.com/img/posts/324/16.png" class="img-fluid" alt="Responsive image">
          <p><li>In the next screen for <strong>dbconfig-common</strong> configuration, choose <strong>Yes</strong></li></p>
          <img src="https://usefulangle.com/img/posts/324/17.png" class="img-fluid" alt="Responsive image">
          <p><li>By default, phpMyAdmin sets a MySQL user named <strong>phpmyadmin</strong>. In the next terminal prompt, the password for this MySQL username is set (this is different from the <strong>root</strong> MySQL user for which we had set a password in an earlier step).</li></p>
          <img src="https://usefulangle.com/img/posts/324/18.png" class="img-fluid" alt="Responsive image">
          <p><li>phpMyAdmin is now installed. This can be tested in the browser by navigating to the <strong>/phpmyadmin</strong> path of the public IP address / DNS of the instance (found in the EC2 management page).<br><br>
            Enter the username as <strong>phpmyadmin</strong> and the password that was setup in the earlier step.</li></p>
          <img src="https://usefulangle.com/img/posts/324/19.png" class="img-fluid" alt="Responsive image">
          <h4>Allowing MySQL Root Login Through phpMyAdmin</h4>
          <p>This is an optional step and will allow the <strong>root</strong> MySQL user to login through phpMyAdmin.</p>
          <p><li>Login to MySql root.</li></p>
          <p><code>sudo mysql -u root -p</code></p>
          <p><li>Change authentication method for the root account to mysql_native_password by executing the following query.</li></p>
          <p>Replace <strong>password</strong> by the root password you entered while installing MySQL.</p>
          <p><code>ALTER USER 'root'@'localhost' IDENTIFIED WITH 'mysql_native_password' BY 'password';</code></p>
          <p><li>To put the changes into effect, execute the following query :</li></p>
          <p><code>FLUSH PRIVILEGES;</code></p>
          <p><li>Following this, we can now do a root login through phpMyAdmin. The username is <strong>root</strong> and password is the one that was setup earlier while installing MySQL.</li></p>
          <p><li>Return back to the command line.</li></p>
          <p><code>exit</code></p>


		<hr class="divider">
		
		<!-- Navbar
		============================ -->
        <section id="idocs_navbar">
          <h2>Postfix</h2>
		  <p class="lead">How to Configure Postfix with Gmail on Ubuntu<br>by <a href="https://www.fosstechnix.com/how-to-configure-postfix-with-gmail-on-ubuntu/">Shweta Mamidwar</a></p>
		  <h4 class="mt-5">Install Postfix on Ubuntu</h4>
          <p>Install Postfix using below command:</span></p>
          <p><code>apt-get install libsasl2-modules postfix</code></p>
          <p>There will be prompts asking General type of mail configuration. Select Internet Site:</p>
          <img src="https://www.fosstechnix.com/wp-content/uploads/2022/06/img1.png" class="img-fluid" alt="Responsive image">
          <p>Enter the fully qualified name of your domain.</p>
          <img src="https://www.fosstechnix.com/wp-content/uploads/2022/06/img2-1024x334.png" class="img-fluid" alt="Responsive image"><br><br>
          <h4>Update Postfix main.cf file</h4>
          <p>After installation of postfix, ensure that the myhostname parameter is configured As shown below</p>
          <p><code>cat /etc/postfix/main.cf | grep ^myhostname</code></p>
          <p><strong>Output:</strong></p>
          <p><code>myhostname = ip-172-31-0-205.ap-south-1.compute.internal</code></p>
          <h4>Generate Google App Password for Postfix</h4>
          <p>We need to generate an App password<br><br>

            Log in to your email, then click the following link: <a href="https://myaccount.google.com/security">Manage your account access and security settings</a>.<br><br>
            
            Scroll down to “Signing into Google” and click 2-Step Verification. You may be asked for your password and a verification code before continuing. Ensure that 2-Step Verification is enabled.<br><br>
            
            Click the following link to Generate an <a href="https://security.google.com/settings/security/apppasswords">App password</a> for Postfix:</p>
          <img src="https://www.fosstechnix.com/wp-content/uploads/2022/06/img2-1024x334.png" class="img-fluid" alt="Responsive image"><br><br>
          <p>Click Select app and choose Other (custom name) from the dropdown. Enter “Postfix” and click Generate.<br><br>

            After generate password you will see like this save your password in secure place</p>
          <img src="https://www.fosstechnix.com/wp-content/uploads/2022/06/img4.png" class="img-fluid" alt="Responsive image"><br><br>
          <h4>Add Gmail Username and App Password to Postfix configuration</h4>
          <p>You need to add your username and password in this file sasl_passwd to this directory /etc/postfix/sasl/<br><br>

            Create /etc/postfix/sasl/sasl_passwd file and add your gmail ID and password we have just created using below command</p>
          <p><code>sudo nano /etc/postfix/sasl/sasl_passwd</code></p>
          <p>And add your gmail ID and password as shown in below</p>
          <p><code>[smtp.gmail.com]:587 example@gmail.com:logwrbyaqcmwslqp</code></p>
          <p>Create the hash file for Postfix using the postmap command</p>
          <p><code>postmap /etc/postfix/sasl/sasl_passwd</code></p>
          <p>After execute postmap command you should have a new file named sasl_passwd.db in the /etc/postfix/.</p>
          <h4>Secure Your Postfix Hash Database and Email Password Files</h4>
          <p><code>chown root:root /etc/postfix/sasl/sasl_passwd /etc/postfix/sasl/sasl_passwd.db</code></p>
          <p><code>chmod 0600 /etc/postfix/sasl/sasl_passwd /etc/postfix/sasl/sasl_passwd.db</code></p>
          <h4>Configure Relay Host postfix with gmail</h4>
          <p>Modify the main.cf file using below command:</p>
          <p><code>sudo nano /etc/postfix/main.cf</code></p>
          <p>Set the relayhost</p>
          <p><code>relayhost = [smtp.gmail.com]:587</code></p>
          <h4>Add Custom Configuration </h4>
          <p>Open main.cf file and this below line end on the file</p>
          <p><code>sudo nano /etc/postfix/main.cf</code></p>
          <p><code># Enable SASL authentication<br>
            smtp_sasl_auth_enable = yes<br>
            # Disallow methods that allow anonymous authentication<br>
            smtp_sasl_security_options = noanonymous<br>
            # Location of sasl_passwd<br>
            smtp_sasl_password_maps = hash:/etc/postfix/sasl/sasl_passwd<br>
            # Enable STARTTLS encryption<br>
            smtp_tls_security_level = encrypt<br>
            # Location of CA certificates<br>
            smtp_tls_CAfile = /etc/ssl/certs/ca-certificates.crt</code></p>
          <p>You need to restart your postfix</p>
          <p><code>systemctl restart postfix</code></p>

		<hr class="divider">
		
		<!-- Sidebar
		============================ -->

        <section id="idocs_sidebar">
          <h2>Rsync & Inotify</h2>
          <p class="lead">For convenience, it was decided to synchronize the files of the website between the two machines, since the files should be identical it was decided to use rsync together with inotify.</p>
		  <p>At this point, all we need to do for now is install these programs.</p>
      <p><code>sudo apt install rsync</code></p>
      <p><code>sudo apt install inotify-tools</code></p>
		
		<hr class="divider">
		
        <section id="idocs_users">
          <h2>Users & Groups</h2>
          <p class="lead">When setting up a secure and scalable web application on a Linux server, it is important to consider the appropriate users and groups. Here are some recommended users and groups:</p>
      
          <p><li>Create a non-privileged user for the application with a home directory:</li></p>
      <p><code>sudo adduser appuser</code></p>
      
      <p><li>Create a web server user:</li></p>
      <p>The web server user and group names may vary depending on the specific web server software you are using. Here's an example for Apache:</p>
      <p><code>sudo adduser --system --no-create-home --disabled-login --group www-data</code></p>
      <p>This command will create a system user and group called "www-data" without a home directory and disabled login. The "www-data" user and group are commonly used by Apache web server on Ubuntu systems.</p>
      
      <p><li>Create a database user:</li></p>
      <p>Replace <username> and <password> with your desired database username and password.</p>
      <p><code>sudo mysql<br>
        CREATE USER '<username>'@'localhost' IDENTIFIED BY '<password>';<br>
        GRANT ALL PRIVILEGES ON `<database>`.* TO '<username>'@'localhost';<br>
        FLUSH PRIVILEGES;<br>
        EXIT;
        </code></p>


    <hr class="divider">

		<!-- Content
		============================ -->
        <section id="idocs_content">
          <h2>Installing Scripts and Website</h2>
          <p class="lead mb-5">Installing scripts for monitoring and easier file edit on both machines.</p>
        </section>
		  
		<!-- Typography
		============================ -->
		<section id="idocs_typography">
		  <h2>Monitoring</h2>
		  <p class="text-4">Description of self-made monitoring and how to install it to startup.</p>
		  <h3>The Script</h3>
      <pre><code>#!/bin/bash

while true; do
    #CPU CONFIGURATIONS

    CPU_INFO_FOR_ALERT=$(top -bn1 | grep "Cpu(s)" | awk '{print $2 + $4}')
    CPU_PERCENT_FOR_ALERT=$(printf "%.0f\n" "$CPU_INFO_FOR_ALERT")

    CPU_INFO="CPU Usage: $CPU_INFO_FOR_ALERT%"

    # IF PERCENTAGE IS GREATER THAN 90% - write an ALARM
    if [ "$CPU_PERCENT_FOR_ALERT" -gt 90 ] # CHANGE THE NUMBER HERE IN ORDER TO CHANGE MAXIMUM PERCENTAGE BEFORE ALARMING | Default - 90
    then
      CPU_WARNING="WARNING! CPU PERCENTAGE IS EXTREMELY HIGH!\n"
      SUBJECT_CPU_WARNING=" (CPU ALARM)"
      DOES_WARNING_EXIST=10
    else
      CPU_WARNING=""
      SUBJECT_CPU_WARNING=""
      DOES_WARNING_EXIST=0
    fi

    #RAM CONFIGURATIONS
    RAM_PERCENT_INFO=$(free -m | awk 'NR==2{printf "RAM Usage: %.2f%%", $3*100/$2 }')
    RAM_PERCENT_FOR_ALERT=$(free -m | awk 'NR==2{printf "%.0f", $3*100/$2 }')
    RAM_TOTAL=$(free -h | awk '/^Mem/ {print $2}')
    RAM_USED=$(free -h | awk '/^Mem/ {print $3}')
    RAM_FREE=$(free -h | awk '/^Mem/ {print $4}')
    RAM_INFO="RAM Usage: $RAM_USED / $RAM_TOTAL"
    RAM_PERCENT_FOR_LOGS=$(free -m | awk 'NR==2{printf "%.2f%%", $3*100/$2 }')

    if [ "$RAM_PERCENT_FOR_ALERT" -gt 80 ] #  | Default - 80
    then
      RAM_WARNING="WARNING! RAM PERCENTAGE IS EXTREMELY HIGH!\n"
      SUBJECT_RAM_WARNING=" (RAM ALARM)"
      DOES_WARNING_EXIST=10
    else
      RAM_WARNING=""
      SUBJECT_RAM_WARNING=""
      DOES_WARNING_EXIST=0
    fi


    #DISK CONFIGURATION
    DISK_PERCENT_INFO=$(df -h / | awk '/\//{print "Disk Usage: "$5}')
    DISK_PERCENT_FOR_ALERT=$(printf "%s\n" "$DISK_PERCENT_INFO" | sed 's/[^0-9]*//g')
    DISK_TOTAL=$(df -h / | awk '/\//{print $2}')
    DISK_USED=$(df -h / | awk '/\//{print $3}')
    DISK_FREE=$(df -h / | awk '/\//{print $4}')
    DISK_INFO="Disk Usage: $DISK_USED / $DISK_TOTAL"
    DISK_PERCENT_FOR_LOGS=$(df -h / | awk '/\//{print $5}')

    if [ "$DISK_PERCENT_FOR_ALERT" -gt 80 ] #  | Default - 80
    then
      DISK_WARNING="WARNING! DISK PERCENTAGE IS EXTREMELY HIGH!\n"
      SUBJECT_DISK_WARNING=" (DISK ALARM)"
      DOES_WARNING_EXIST=10
    else
      DISK_WARNING=""
      SUBJECT_DISK_WARNING=""
      DOES_WARNING_EXIST=0
    fi

    #AN EMAIL SENDING CONFIGURATION
    if [ "$DOES_WARNING_EXIST" -gt 5 ]
    then
        EMAIL="yourmail@gmail.com"

        SUBJECT="Test System Information$SUBJECT_CPU_WARNING $SUBJECT_RAM_WARNING $SUBJECT_DISK_WARNING - $(date '+%Y-%m-%d %H:%M:%S')"

        BODY="SYSTEM INFORMATION:\n\n----WARNINGS----\n $CPU_WARNING $RAM_WARNING $DISK_WARNING\n----CPU----\n$CPU_INFO\n\n----RAM----\n$RAM_PERCENT_INFO\n$RAM_INFO\n\n----DISK----\n$DISK_PERCENT_INFO\n$DISK_INFO\n\nKind Regards,\nSelf-Made Monitoring"

        echo -e "Subject: $SUBJECT\n$BODY" | sendmail -t "$EMAIL"
    fi
            
    #MAKING LOG FILES

    echo "Time: $(date '+%H:%M:%S')\n\nWarnings:$SUBJECT_CPU_WARNING $SUBJECT_RAM_WARNING $SUBJECT_DISK_WARNING\n$CPU_INFO\n$RAM_INFO ($RAM_PERCENT_FOR_LOGS)\n$DISK_INFO ($DISK_PERCENT_FOR_LOGS)\n------------------------\n" >> /home/ubuntu/logs/$(date '+%Y-%m-%d').log


    #PAUSE
    sleep 60
done
        </code></pre>
        <p>Before making the script being activated on the startup it is firstly needed to put it on the machines. You can do this in a way that is convenient for you. </p>
        <p>To make this script work automatically on the system reboot via crontab just type this command:</p>
        <p><code>crontab -e</code></p>
        <p><code>@reboot sleep 45 && sh /path/to/file/logscript.sh</code></p>

		<hr class="divider">
		
		<!-- Code
		============================ -->
		<section id="idocs_code">
		  <h2>Rsync</h2>
		  <p class="text-4">The script that synchronize the website between both machines.</p>
		  
		  <h3 class="mt-5">The Script</h3>
		  <pre><code>#!/bin/bash

while inotifywait -r -e modify,create,delete,move /path/to/website; do
  rsync -avz /path/to/website user@ip-address:/path/to/website
done
      </code></pre>
      <p>To make this script run on a startup you can also add it to crontab by using this commands:</p>
      <p><code>crontab -e</code></p>
      <p><code>@reboot sleep 45 && sh /path/to/file/syncwebpages.sh</code></p>

		<hr class="divider">


		<section id="idocs_backups">
		  <h2>Backups</h2>
		  <p class="text-4">The command that makes backups. It also can be created as a script and be placed in crontab but in this project, it is existing as an example on a test instance.</p>
		  
		  <h3 class="mt-5">The Script</h3>
		  <pre><code>
sudo tar czf /backup.tar.gz --exclude=/backup.tar.gz --exclude=/home --exclude=/media --exclude=/dev --exclude=/mnt --exclude=/proc --exclude=/sys --exclude=/tmp /
      </code></pre>

		<hr class="divider">
		
        <!-- Components
		============================ -->
        <section id="idocs_components">
          <h2>Website Installation</h2>
          <p class="mb-5">Installing a website on a LAMP Server.</p>
          <p><strong>NOTE!</strong></p>
          <p>In my case, the website sync is only installed on the <strong>lamp1</strong> machine. Therefore, all changes to the site must be made exactly on this machine so that changes are automatically transferred to the other.</p>
        </section>
		  
		  <!-- Accordion
		  ============================ -->
		  <section id="idocs_accordion">
            <h2>Installing Website on an instance through GitHub</h2>
            <p>In order to clone repository from GitHub you need to write this command:</p>
            <p><code>cd /var/www/html</code></p>
            <p><code>git clone https://github.com/Vosmyerka/linux-final-2023</code></p>
            <p><code>cp -r linux-final-2023</code></p>
            <p><code>rm -rf linux-final-2023</code></p>
			
          
		  <hr class="divider">
        
        <!-- Source & Credits
		============================ -->
        <section id="idocs_source_credits">
          <h2>Source & Credits</h2>
          <h4>Software Installation Guides:</h4>
          <ul>
            <li>How to Install LAMP (Linux, Apache, MySql & PHP) on AWS EC2 with Ubuntu 20.04 - <a target="_blank" href="https://usefulangle.com/post/324/aws-ec2-install-linux-apache-mysql-php-phpmyadmin-lamp-stack-ubuntu-20-04">https://usefulangle.com/post/324/aws-ec2-install-linux-apache-mysql-php-phpmyadmin-lamp-stack-ubuntu-20-04</a></li>
            <li>How to Configure Postfix with Gmail on Ubuntu - <a target="_blank" href="https://www.fosstechnix.com/how-to-configure-postfix-with-gmail-on-ubuntu/">https://www.fosstechnix.com/how-to-configure-postfix-with-gmail-on-ubuntu/</a></li>
          </ul>
		  <h4>Website:</h4>
          <ul>
            <li>Main Website (GetTemplates) - <a target="_blank" href="https://gettemplates.co/">https://gettemplates.co/</a></li>
            <li>Docs Website (Harnish Design) - <a target="_blank" href="https://harnishdesign.net/">https://harnishdesign.net/</a></li>
          </ul>
      <h4>Additional Links:</h4>
          <ul>
            <li>How to make backups (Losst) - <a target="_blank" href="https://losst.pro/rezervnoe-kopirovanie-ubuntu">https://losst.pro/rezervnoe-kopirovanie-ubuntu</a></li></li>
          </ul>
        </section>
        
		<hr class="divider">
		
		<!-- Support
		============================ -->
        <section id="idocs_support">
          <h2>Support</h2>
          <p>If this documentation doesn't answer your questions, So, Please open a ticket via <a class="btn btn-primary" target="_blank" href="https://discord.gg/6ucmqa6K39">Discord Ticketing System</a></p>
		  <p> To create a ticket you just need to click on the appropriate button in the desired section. We will be happy to answer your question as soon as we can.</div>
        </section>
		
		<hr class="divider">
		
  
  <!-- Footer
  ============================ -->
  <footer id="footer" class="section bg-dark footer-text-light">
    <div class="container">
      <ul class="social-icons social-icons-lg social-icons-muted justify-content-center mb-3">
        <li><a data-toggle="tooltip" href="https://github.com/Vosmyerka/linux-final-2023" target="_blank" title="" data-original-title="GitHub"><i class="fab fa-github"></i></a></li>
      </ul>
      <p class="text-center">Copyright &copy; 2020 <a href="http://www.harnishdesign.net/idocs-one-page-documentation-html-template/">iDocs</a>. All Rights Reserved.</p>
	  <p class="text-2 text-center mb-0">Design &amp; Developed by <a class="btn-link" target="_blank" href="http://www.harnishdesign.net/">HarnishDesign</a>.</p>
    </div>
  </footer>
  <!-- Footer end -->
  
</div>
<!-- Document Wrapper end --> 

<!-- Back To Top --> 
<a id="back-to-top" data-toggle="tooltip" title="Back to Top" href="javascript:void(0)"><i class="fa fa-chevron-up"></i></a> 

<!-- JavaScript
============================ -->
<script src="assets/vendor/jquery/jquery.min.js"></script> 
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script> 
<!-- Highlight JS -->
<script src="assets/vendor/highlight.js/highlight.min.js"></script> 
<!-- Easing --> 
<script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script> 
<!-- Magnific Popup --> 
<script src="assets/vendor/magnific-popup/jquery.magnific-popup.min.js"></script> 
<!-- Custom Script -->
<script src="assets/js/theme.js"></script>
</body>
</html>
